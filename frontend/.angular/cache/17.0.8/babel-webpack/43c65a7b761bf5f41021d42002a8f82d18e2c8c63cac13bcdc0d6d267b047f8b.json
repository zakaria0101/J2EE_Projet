{"ast":null,"code":"import { UserService } from \"../../services/user.service\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { Role } from \"../../enum/Role\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/user.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction LoginComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtext(1, \" Invalid username and password. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵtext(1, \" You have been logged out. \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(userService, router, route) {\n      this.userService = userService;\n      this.router = router;\n      this.route = route;\n      this.submitted = false;\n      this.model = {\n        username: \"\",\n        password: \"\",\n        remembered: false\n      };\n      this.returnUrl = \"/\";\n    }\n    ngOnInit() {\n      let params = this.route.snapshot.queryParamMap;\n      this.isLogout = params.has(\"logout\");\n      this.returnUrl = params.get(\"returnUrl\");\n    }\n    onSubmit() {\n      this.submitted = true;\n      this.userService.login(this.model).subscribe(user => {\n        if (user) {\n          if (user.role != Role.Customer) {\n            this.returnUrl = \"/seller\";\n          }\n          this.router.navigateByUrl(this.returnUrl);\n        } else {\n          this.isLogout = false;\n          this.isInvalid = true;\n        }\n      });\n    }\n    fillLoginFields(u, p) {\n      this.model.username = u;\n      this.model.password = p;\n      this.onSubmit();\n    }\n    static #_ = this.ɵfac = function LoginComponent_Factory(t) {\n      return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LoginComponent,\n      selectors: [[\"app-login\"]],\n      decls: 44,\n      vars: 8,\n      consts: [[\"align\", \"center\", 1, \"display-4\", \"mb-5\"], [2, \"width\", \"40%\", \"margin\", \"25px auto\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [\"class\", \"alert alert-info\", 4, \"ngIf\"], [3, \"ngSubmit\"], [\"form\", \"ngForm\"], [1, \"form-group\"], [\"type\", \"text\", \"id\", \"email\", \"name\", \"email\", \"placeholder\", \"Enter email\", \"required\", \"\", \"autofocus\", \"\", \"autocomplete\", \"email\", 1, \"form-control\", \"form-control-lg\", 3, \"ngModel\", \"ngModelChange\"], [\"email\", \"ngModel\"], [1, \"alert\", \"alert-danger\", 3, \"hidden\"], [\"type\", \"password\", \"id\", \"password\", \"name\", \"password\", \"autocomplete\", \"password\", \"placeholder\", \"Password\", \"required\", \"\", 1, \"form-control\", \"form-control-lg\", 3, \"ngModel\", \"ngModelChange\"], [\"password\", \"ngModel\"], [\"type\", \"checkbox\", \"id\", \"remember_me\", \"name\", \"remember-me\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"remember_me\", 1, \"inline\"], [\"routerLink\", \"/register\", 1, \"float-right\"], [\"type\", \"submit\", 1, \"btn\", \"btn-lg\", \"btn-primary\", \"btn-block\", 3, \"disabled\"], [\"id\", \"sampleLoginTable\", 2, \"width\", \"100%\"], [\"href\", \"javascript:void(0)\", 3, \"click\"], [1, \"alert\", \"alert-danger\"], [1, \"alert\", \"alert-info\"]],\n      template: function LoginComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"h1\", 0);\n          i0.ɵɵtext(1, \"Sign In\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(2, \"div\", 1);\n          i0.ɵɵtemplate(3, LoginComponent_div_3_Template, 2, 0, \"div\", 2)(4, LoginComponent_div_4_Template, 2, 0, \"div\", 3);\n          i0.ɵɵelementStart(5, \"form\", 4, 5);\n          i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_5_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelementStart(7, \"div\", 6)(8, \"label\");\n          i0.ɵɵtext(9, \"Email address\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"input\", 7, 8);\n          i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_10_listener($event) {\n            return ctx.model.username = $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"div\", 9);\n          i0.ɵɵtext(13, \" Email is required \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(14, \"div\", 6)(15, \"label\");\n          i0.ɵɵtext(16, \"Password\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(17, \"input\", 10, 11);\n          i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_17_listener($event) {\n            return ctx.model.password = $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(19, \"div\", 9);\n          i0.ɵɵtext(20, \" Email is required \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(21, \"div\", 6)(22, \"div\")(23, \"input\", 12);\n          i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_23_listener($event) {\n            return ctx.model.remembered = $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(24, \"label\", 13);\n          i0.ɵɵtext(25, \"Remember me\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(26, \"a\", 14);\n          i0.ɵɵtext(27, \"Sign Up\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(28, \"div\", 6)(29, \"button\", 15);\n          i0.ɵɵtext(30, \"Sign In\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(31, \"strong\");\n          i0.ɵɵtext(32, \"Sample Users\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(33, \"table\", 16)(34, \"tr\")(35, \"td\")(36, \"a\", 17);\n          i0.ɵɵlistener(\"click\", function LoginComponent_Template_a_click_36_listener() {\n            return ctx.fillLoginFields(\"customer1@email.com\", \"123\");\n          });\n          i0.ɵɵtext(37, \"customer1\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(38, \"td\")(39, \"a\", 17);\n          i0.ɵɵlistener(\"click\", function LoginComponent_Template_a_click_39_listener() {\n            return ctx.fillLoginFields(\"employee1@email.com\", \"123\");\n          });\n          i0.ɵɵtext(40, \"employee1\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(41, \"td\")(42, \"a\", 17);\n          i0.ɵɵlistener(\"click\", function LoginComponent_Template_a_click_42_listener() {\n            return ctx.fillLoginFields(\"manager1@email.com\", \"123\");\n          });\n          i0.ɵɵtext(43, \"manager1\");\n          i0.ɵɵelementEnd()()()()();\n        }\n        if (rf & 2) {\n          const _r2 = i0.ɵɵreference(6);\n          const _r3 = i0.ɵɵreference(11);\n          const _r4 = i0.ɵɵreference(18);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.isInvalid);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.isLogout);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngModel\", ctx.model.username);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"hidden\", _r3.valid || _r3.pristine);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngModel\", ctx.model.password);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"hidden\", _r4.valid || _r4.pristine);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.model.remembered);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"disabled\", !_r2.form.valid);\n        }\n      },\n      dependencies: [i3.NgIf, i2.RouterLink, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.CheckboxControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm]\n    });\n  }\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}